{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport { PackageSearchService } from './package-search.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./package-search.service\";\n\nfunction PackageSearchComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" - \");\n    i0.ɵɵelementStart(4, \"i\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const package_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", package_r1.name, \" v.\", package_r1.version, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(package_r1.description);\n  }\n}\n\nexport class PackageSearchComponent {\n  constructor(searchService) {\n    this.searchService = searchService;\n    this.withRefresh = false;\n    this.searchText$ = new Subject();\n  }\n\n  search(packageName) {\n    this.searchText$.next(packageName);\n  }\n\n  ngOnInit() {\n    this.packages$ = this.searchText$.pipe(debounceTime(500), distinctUntilChanged(), switchMap(packageName => this.searchService.search(packageName, this.withRefresh)));\n  }\n\n  toggleRefresh() {\n    this.withRefresh = !this.withRefresh;\n  }\n\n  getValue(event) {\n    return event.target.value;\n  }\n\n}\n\nPackageSearchComponent.ɵfac = function PackageSearchComponent_Factory(t) {\n  return new (t || PackageSearchComponent)(i0.ɵɵdirectiveInject(i1.PackageSearchService));\n};\n\nPackageSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PackageSearchComponent,\n  selectors: [[\"app-package-search\"]],\n  features: [i0.ɵɵProvidersFeature([PackageSearchService])],\n  decls: 12,\n  vars: 4,\n  consts: [[\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Search\", 3, \"keyup\"], [\"type\", \"checkbox\", \"id\", \"refresh\", 3, \"checked\", \"click\"], [\"for\", \"refresh\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function PackageSearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Search Npm Packages\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"p\");\n      i0.ɵɵelementStart(3, \"i\");\n      i0.ɵɵtext(4, \"Searches when typing stops. Caches for 30 seconds.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"input\", 0);\n      i0.ɵɵlistener(\"keyup\", function PackageSearchComponent_Template_input_keyup_5_listener($event) {\n        return ctx.search(ctx.getValue($event));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 1);\n      i0.ɵɵlistener(\"click\", function PackageSearchComponent_Template_input_click_6_listener() {\n        return ctx.toggleRefresh();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"label\", 2);\n      i0.ɵɵtext(8, \"with refresh\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"ul\");\n      i0.ɵɵtemplate(10, PackageSearchComponent_li_10_Template, 6, 3, \"li\", 3);\n      i0.ɵɵpipe(11, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"checked\", ctx.withRefresh);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(11, 2, ctx.packages$));\n    }\n  },\n  styles: [\"input[_ngcontent-%COMP%] { margin-bottom: .5rem; }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2Utc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFRLG9CQUFvQixFQUFFIiwiZmlsZSI6InBhY2thZ2Utc2VhcmNoLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbImlucHV0IHsgbWFyZ2luLWJvdHRvbTogLjVyZW07IH0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/James/source/repos/biofood_test_jd/ClientApp/src/app/package-search/package-search.component.ts"],"names":["Subject","debounceTime","distinctUntilChanged","switchMap","PackageSearchService","i0","i1","PackageSearchComponent_li_10_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","package_r1","$implicit","ɵɵadvance","ɵɵtextInterpolate2","name","version","ɵɵtextInterpolate","description","PackageSearchComponent","constructor","searchService","withRefresh","searchText$","search","packageName","next","ngOnInit","packages$","pipe","toggleRefresh","getValue","event","target","value","ɵfac","PackageSearchComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","PackageSearchComponent_Template","ɵɵlistener","PackageSearchComponent_Template_input_keyup_5_listener","$event","PackageSearchComponent_Template_input_click_6_listener","ɵɵtemplate","ɵɵpipe","ɵɵproperty","ɵɵpipeBind1","styles"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,YAAT,EAAuBC,oBAAvB,EAA6CC,SAA7C,QAA8D,gBAA9D;AACA,SAASC,oBAAT,QAAqC,0BAArC;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;;AACA,SAASC,qCAAT,CAA+CC,EAA/C,EAAmDC,GAAnD,EAAwD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAClEH,IAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAL,IAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAL,IAAAA,EAAE,CAACM,MAAH,CAAU,CAAV;AACAN,IAAAA,EAAE,CAACO,YAAH;AACAP,IAAAA,EAAE,CAACM,MAAH,CAAU,CAAV,EAAa,KAAb;AACAN,IAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAL,IAAAA,EAAE,CAACM,MAAH,CAAU,CAAV;AACAN,IAAAA,EAAE,CAACO,YAAH;AACAP,IAAAA,EAAE,CAACO,YAAH;AACH;;AAAC,MAAIJ,EAAE,GAAG,CAAT,EAAY;AACV,UAAMK,UAAU,GAAGJ,GAAG,CAACK,SAAvB;AACAT,IAAAA,EAAE,CAACU,SAAH,CAAa,CAAb;AACAV,IAAAA,EAAE,CAACW,kBAAH,CAAsB,EAAtB,EAA0BH,UAAU,CAACI,IAArC,EAA2C,KAA3C,EAAkDJ,UAAU,CAACK,OAA7D,EAAsE,EAAtE;AACAb,IAAAA,EAAE,CAACU,SAAH,CAAa,CAAb;AACAV,IAAAA,EAAE,CAACc,iBAAH,CAAqBN,UAAU,CAACO,WAAhC;AACH;AAAE;;AACH,OAAO,MAAMC,sBAAN,CAA6B;AAChCC,EAAAA,WAAW,CAACC,aAAD,EAAgB;AACvB,SAAKA,aAAL,GAAqBA,aAArB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKC,WAAL,GAAmB,IAAIzB,OAAJ,EAAnB;AACH;;AACD0B,EAAAA,MAAM,CAACC,WAAD,EAAc;AAChB,SAAKF,WAAL,CAAiBG,IAAjB,CAAsBD,WAAtB;AACH;;AACDE,EAAAA,QAAQ,GAAG;AACP,SAAKC,SAAL,GAAiB,KAAKL,WAAL,CAAiBM,IAAjB,CAAsB9B,YAAY,CAAC,GAAD,CAAlC,EAAyCC,oBAAoB,EAA7D,EAAiEC,SAAS,CAACwB,WAAW,IAAI,KAAKJ,aAAL,CAAmBG,MAAnB,CAA0BC,WAA1B,EAAuC,KAAKH,WAA5C,CAAhB,CAA1E,CAAjB;AACH;;AACDQ,EAAAA,aAAa,GAAG;AAAE,SAAKR,WAAL,GAAmB,CAAC,KAAKA,WAAzB;AAAuC;;AACzDS,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACZ,WAAOA,KAAK,CAACC,MAAN,CAAaC,KAApB;AACH;;AAf+B;;AAiBpCf,sBAAsB,CAACgB,IAAvB,GAA8B,SAASC,8BAAT,CAAwCC,CAAxC,EAA2C;AAAE,SAAO,KAAKA,CAAC,IAAIlB,sBAAV,EAAkChB,EAAE,CAACmC,iBAAH,CAAqBlC,EAAE,CAACF,oBAAxB,CAAlC,CAAP;AAA0F,CAArK;;AACAiB,sBAAsB,CAACoB,IAAvB,GAA8B,aAAcpC,EAAE,CAACqC,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAEtB,sBAAR;AAAgCuB,EAAAA,SAAS,EAAE,CAAC,CAAC,oBAAD,CAAD,CAA3C;AAAqEC,EAAAA,QAAQ,EAAE,CAACxC,EAAE,CAACyC,kBAAH,CAAsB,CAAC1C,oBAAD,CAAtB,CAAD,CAA/E;AAAgI2C,EAAAA,KAAK,EAAE,EAAvI;AAA2IC,EAAAA,IAAI,EAAE,CAAjJ;AAAoJC,EAAAA,MAAM,EAAE,CAAC,CAAC,MAAD,EAAS,MAAT,EAAiB,IAAjB,EAAuB,MAAvB,EAA+B,aAA/B,EAA8C,QAA9C,EAAwD,CAAxD,EAA2D,OAA3D,CAAD,EAAsE,CAAC,MAAD,EAAS,UAAT,EAAqB,IAArB,EAA2B,SAA3B,EAAsC,CAAtC,EAAyC,SAAzC,EAAoD,OAApD,CAAtE,EAAoI,CAAC,KAAD,EAAQ,SAAR,CAApI,EAAwJ,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAAxJ,CAA5J;AAA8UC,EAAAA,QAAQ,EAAE,SAASC,+BAAT,CAAyC3C,EAAzC,EAA6CC,GAA7C,EAAkD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACjdH,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAL,MAAAA,EAAE,CAACM,MAAH,CAAU,CAAV,EAAa,qBAAb;AACAN,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAL,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACAL,MAAAA,EAAE,CAACM,MAAH,CAAU,CAAV,EAAa,oDAAb;AACAN,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B;AACAL,MAAAA,EAAE,CAAC+C,UAAH,CAAc,OAAd,EAAuB,SAASC,sDAAT,CAAgEC,MAAhE,EAAwE;AAAE,eAAO7C,GAAG,CAACiB,MAAJ,CAAWjB,GAAG,CAACwB,QAAJ,CAAaqB,MAAb,CAAX,CAAP;AAA0C,OAA3I;AACAjD,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B;AACAL,MAAAA,EAAE,CAAC+C,UAAH,CAAc,OAAd,EAAuB,SAASG,sDAAT,GAAkE;AAAE,eAAO9C,GAAG,CAACuB,aAAJ,EAAP;AAA6B,OAAxH;AACA3B,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,OAArB,EAA8B,CAA9B;AACAL,MAAAA,EAAE,CAACM,MAAH,CAAU,CAAV,EAAa,cAAb;AACAN,MAAAA,EAAE,CAACO,YAAH;AACAP,MAAAA,EAAE,CAACK,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACAL,MAAAA,EAAE,CAACmD,UAAH,CAAc,EAAd,EAAkBjD,qCAAlB,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,IAA/D,EAAqE,CAArE;AACAF,MAAAA,EAAE,CAACoD,MAAH,CAAU,EAAV,EAAc,OAAd;AACApD,MAAAA,EAAE,CAACO,YAAH;AACH;;AAAC,QAAIJ,EAAE,GAAG,CAAT,EAAY;AACVH,MAAAA,EAAE,CAACU,SAAH,CAAa,CAAb;AACAV,MAAAA,EAAE,CAACqD,UAAH,CAAc,SAAd,EAAyBjD,GAAG,CAACe,WAA7B;AACAnB,MAAAA,EAAE,CAACU,SAAH,CAAa,CAAb;AACAV,MAAAA,EAAE,CAACqD,UAAH,CAAc,SAAd,EAAyBrD,EAAE,CAACsD,WAAH,CAAe,EAAf,EAAmB,CAAnB,EAAsBlD,GAAG,CAACqB,SAA1B,CAAzB;AACH;AAAE,GA3B0D;AA2BxD8B,EAAAA,MAAM,EAAE,CAAC,2WAAD;AA3BgD,CAArB,CAA5C","sourcesContent":["import { Subject } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\r\nimport { PackageSearchService } from './package-search.service';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./package-search.service\";\r\nfunction PackageSearchComponent_li_10_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"li\");\r\n    i0.ɵɵelementStart(1, \"b\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(3, \" - \");\r\n    i0.ɵɵelementStart(4, \"i\");\r\n    i0.ɵɵtext(5);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const package_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate2(\"\", package_r1.name, \" v.\", package_r1.version, \"\");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate(package_r1.description);\r\n} }\r\nexport class PackageSearchComponent {\r\n    constructor(searchService) {\r\n        this.searchService = searchService;\r\n        this.withRefresh = false;\r\n        this.searchText$ = new Subject();\r\n    }\r\n    search(packageName) {\r\n        this.searchText$.next(packageName);\r\n    }\r\n    ngOnInit() {\r\n        this.packages$ = this.searchText$.pipe(debounceTime(500), distinctUntilChanged(), switchMap(packageName => this.searchService.search(packageName, this.withRefresh)));\r\n    }\r\n    toggleRefresh() { this.withRefresh = !this.withRefresh; }\r\n    getValue(event) {\r\n        return event.target.value;\r\n    }\r\n}\r\nPackageSearchComponent.ɵfac = function PackageSearchComponent_Factory(t) { return new (t || PackageSearchComponent)(i0.ɵɵdirectiveInject(i1.PackageSearchService)); };\r\nPackageSearchComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PackageSearchComponent, selectors: [[\"app-package-search\"]], features: [i0.ɵɵProvidersFeature([PackageSearchService])], decls: 12, vars: 4, consts: [[\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Search\", 3, \"keyup\"], [\"type\", \"checkbox\", \"id\", \"refresh\", 3, \"checked\", \"click\"], [\"for\", \"refresh\"], [4, \"ngFor\", \"ngForOf\"]], template: function PackageSearchComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h2\");\r\n        i0.ɵɵtext(1, \"Search Npm Packages\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"p\");\r\n        i0.ɵɵelementStart(3, \"i\");\r\n        i0.ɵɵtext(4, \"Searches when typing stops. Caches for 30 seconds.\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"input\", 0);\r\n        i0.ɵɵlistener(\"keyup\", function PackageSearchComponent_Template_input_keyup_5_listener($event) { return ctx.search(ctx.getValue($event)); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"input\", 1);\r\n        i0.ɵɵlistener(\"click\", function PackageSearchComponent_Template_input_click_6_listener() { return ctx.toggleRefresh(); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"label\", 2);\r\n        i0.ɵɵtext(8, \"with refresh\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(9, \"ul\");\r\n        i0.ɵɵtemplate(10, PackageSearchComponent_li_10_Template, 6, 3, \"li\", 3);\r\n        i0.ɵɵpipe(11, \"async\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"checked\", ctx.withRefresh);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(11, 2, ctx.packages$));\r\n    } }, styles: [\"input[_ngcontent-%COMP%] { margin-bottom: .5rem; }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2Utc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFRLG9CQUFvQixFQUFFIiwiZmlsZSI6InBhY2thZ2Utc2VhcmNoLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbImlucHV0IHsgbWFyZ2luLWJvdHRvbTogLjVyZW07IH0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}