<div class="container">
  <h2>Users</h2>

  <div class="form-group py-2">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="row py-2">
        <div class="col-3">
          <input type="text" [(ngModel)]="userfirstname" id="userfirstname" required class="form-control" placeholder="First name:" formControlName="fname">
          <div *ngIf="fname.invalid && (fname.dirty || fname.touched)" class="alert alert-danger">
            <div *ngIf="fname.errors?.['required']">
              First name is required.
            </div>
            <div *ngIf="fname.errors?.['minlength']">
              First name must be at least 4 characters long.
            </div>
          </div>
        </div>
        <div class="col-3">
          <input type="text" [(ngModel)]="userlastname" id="userlastname" required class="form-control" placeholder="Last name:" formControlName="lname">
          <div *ngIf="lname.invalid && (lname.dirty || lname.touched)" class="alert alert-danger">
            <div *ngIf="lname.errors?.['required']">
              Last name is required.
            </div>
            <div *ngIf="lname.errors?.['minlength']">
              Last name must be at least 4 characters long.
            </div>
          </div>
        </div>
        <div class="col-3">
          <button type="submit" [disabled]="(fname.invalid || lname.invalid)" class="btn btn-primary">
            Add user
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="row py-2">
    <div class="col-6">
      <input type="text" [(ngModel)]="usersearchterm" id="usersearchterm" class="form-control" (ngModelChange)="search($event)" placeholder="Search for User:">
    </div>
  </div>

  <div class="table table-responsive">
    <table class="table table-striped" aria-labelledby="tableLabel">
      <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td>{{ user.firstname }}</td>
          <td>{{ user.lastname }}</td>
          <td>
            <button type="button" class="btn btn-danger" title="delete user" (click)="delete(user)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
